<!DOCTYPE HTML>
<html lang="fr">
<head>
<!-- Generated by javadoc (17) -->
<title>SizeBasedFileRewriter</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.apache.iceberg.actions, class: SizeBasedFileRewriter">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.iceberg.actions</a></div>
<h1 title="Class SizeBasedFileRewriter" class="title">Class SizeBasedFileRewriter&lt;T extends <a href="../ContentScanTask.html" title="interface in org.apache.iceberg">ContentScanTask</a>&lt;F&gt;,<wbr>F extends <a href="../ContentFile.html" title="interface in org.apache.iceberg">ContentFile</a>&lt;F&gt;&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.iceberg.actions.SizeBasedFileRewriter&lt;T,<wbr>F&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a>&lt;T,<wbr>F&gt;</code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="SizeBasedDataRewriter.html" title="class in org.apache.iceberg.actions">SizeBasedDataRewriter</a></code>, <code><a href="SizeBasedPositionDeletesRewriter.html" title="class in org.apache.iceberg.actions">SizeBasedPositionDeletesRewriter</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">SizeBasedFileRewriter&lt;T extends <a href="../ContentScanTask.html" title="interface in org.apache.iceberg">ContentScanTask</a>&lt;F&gt;,<wbr>F extends <a href="../ContentFile.html" title="interface in org.apache.iceberg">ContentFile</a>&lt;F&gt;&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a>&lt;T,<wbr>F&gt;</span></div>
<div class="block">A file rewriter that determines which files to rewrite based on their size.

 <p>If files are smaller than the <a href="#MIN_FILE_SIZE_BYTES"><code>MIN_FILE_SIZE_BYTES</code></a> threshold or larger than the <a href="#MAX_FILE_SIZE_BYTES"><code>MAX_FILE_SIZE_BYTES</code></a> threshold, they are considered targets for being rewritten.

 <p>Once selected, files are grouped based on the <a href="../util/BinPacking.html" title="class in org.apache.iceberg.util"><code>bin-packing algorithm</code></a> into
 groups of no more than <a href="#MAX_FILE_GROUP_SIZE_BYTES"><code>MAX_FILE_GROUP_SIZE_BYTES</code></a>. Groups will be actually rewritten if
 they contain more than <a href="#MIN_INPUT_FILES"><code>MIN_INPUT_FILES</code></a> or if they would produce at least one file of
 <a href="#TARGET_FILE_SIZE_BYTES"><code>TARGET_FILE_SIZE_BYTES</code></a>.

 <p>Note that implementations may add extra conditions for selecting files or filtering groups.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#MAX_FILE_GROUP_SIZE_BYTES" class="member-name-link">MAX_FILE_GROUP_SIZE_BYTES</a></code></div>
<div class="col-last even-row-color">
<div class="block">This option controls the largest amount of data that should be rewritten in a single file
 group.</div>
</div>
<div class="col-first odd-row-color"><code>static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#MAX_FILE_GROUP_SIZE_BYTES_DEFAULT" class="member-name-link">MAX_FILE_GROUP_SIZE_BYTES_DEFAULT</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#MAX_FILE_SIZE_BYTES" class="member-name-link">MAX_FILE_SIZE_BYTES</a></code></div>
<div class="col-last even-row-color">
<div class="block">Controls which files will be considered for rewriting.</div>
</div>
<div class="col-first odd-row-color"><code>static final double</code></div>
<div class="col-second odd-row-color"><code><a href="#MAX_FILE_SIZE_DEFAULT_RATIO" class="member-name-link">MAX_FILE_SIZE_DEFAULT_RATIO</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#MIN_FILE_SIZE_BYTES" class="member-name-link">MIN_FILE_SIZE_BYTES</a></code></div>
<div class="col-last even-row-color">
<div class="block">Controls which files will be considered for rewriting.</div>
</div>
<div class="col-first odd-row-color"><code>static final double</code></div>
<div class="col-second odd-row-color"><code><a href="#MIN_FILE_SIZE_DEFAULT_RATIO" class="member-name-link">MIN_FILE_SIZE_DEFAULT_RATIO</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#MIN_INPUT_FILES" class="member-name-link">MIN_INPUT_FILES</a></code></div>
<div class="col-last even-row-color">
<div class="block">Any file group exceeding this number of files will be rewritten regardless of other criteria.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MIN_INPUT_FILES_DEFAULT" class="member-name-link">MIN_INPUT_FILES_DEFAULT</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#REWRITE_ALL" class="member-name-link">REWRITE_ALL</a></code></div>
<div class="col-last even-row-color">
<div class="block">Overrides other options and forces rewriting of all provided files.</div>
</div>
<div class="col-first odd-row-color"><code>static final boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#REWRITE_ALL_DEFAULT" class="member-name-link">REWRITE_ALL_DEFAULT</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#TARGET_FILE_SIZE_BYTES" class="member-name-link">TARGET_FILE_SIZE_BYTES</a></code></div>
<div class="col-last even-row-color">
<div class="block">The target output file size that this file rewriter will attempt to generate.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.iceberg.Table)" class="member-name-link">SizeBasedFileRewriter</a><wbr>(<a href="../Table.html" title="interface in org.apache.iceberg">Table</a>&nbsp;table)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#defaultTargetFileSize()" class="member-name-link">defaultTargetFileSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enoughContent(java.util.List)" class="member-name-link">enoughContent</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#enoughInputFiles(java.util.List)" class="member-name-link">enoughInputFiles</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#filterFileGroups(java.util.List)" class="member-name-link">filterFileGroups</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;&nbsp;groups)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#filterFiles(java.lang.Iterable)" class="member-name-link">filterFiles</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;tasks)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#init(java.util.Map)" class="member-name-link">init</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initializes this rewriter using provided options.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#inputSize(java.util.List)" class="member-name-link">inputSize</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#numOutputFiles(long)" class="member-name-link">numOutputFiles</a><wbr>(long&nbsp;inputSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determines the preferable number of output files when rewriting a particular file group.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../PartitionSpec.html" title="class in org.apache.iceberg">PartitionSpec</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#outputSpec()" class="member-name-link">outputSpec</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#outputSpecId()" class="member-name-link">outputSpecId</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#planFileGroups(java.lang.Iterable)" class="member-name-link">planFileGroups</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;tasks)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Selects files which this rewriter believes are valid targets to be rewritten based on their
 scan tasks and groups those scan tasks into file groups.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#splitSize(long)" class="member-name-link">splitSize</a><wbr>(long&nbsp;inputSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Calculates the split size to use in bin-packing rewrites.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../Table.html" title="interface in org.apache.iceberg">Table</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#table()" class="member-name-link">table</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tooMuchContent(java.util.List)" class="member-name-link">tooMuchContent</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#validOptions()" class="member-name-link">validOptions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a set of supported options for this rewriter.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#writeMaxFileSize()" class="member-name-link">writeMaxFileSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Estimates a larger max target file size than the target size used in task creation to avoid
 creating tiny remainder files.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#wronglySized(T)" class="member-name-link">wronglySized</a><wbr>(<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&nbsp;task)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.iceberg.actions.FileRewriter">Methods inherited from interface&nbsp;org.apache.iceberg.actions.<a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a></h3>
<code><a href="FileRewriter.html#description()">description</a>, <a href="FileRewriter.html#rewrite(java.util.List)">rewrite</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="TARGET_FILE_SIZE_BYTES">
<h3>TARGET_FILE_SIZE_BYTES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">TARGET_FILE_SIZE_BYTES</span></div>
<div class="block">The target output file size that this file rewriter will attempt to generate.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.TARGET_FILE_SIZE_BYTES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_FILE_SIZE_BYTES">
<h3>MIN_FILE_SIZE_BYTES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">MIN_FILE_SIZE_BYTES</span></div>
<div class="block">Controls which files will be considered for rewriting. Files with sizes under this threshold
 will be considered for rewriting regardless of any other criteria.

 <p>Defaults to 75% of the target file size.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MIN_FILE_SIZE_BYTES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_FILE_SIZE_DEFAULT_RATIO">
<h3>MIN_FILE_SIZE_DEFAULT_RATIO</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">MIN_FILE_SIZE_DEFAULT_RATIO</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MIN_FILE_SIZE_DEFAULT_RATIO">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_FILE_SIZE_BYTES">
<h3>MAX_FILE_SIZE_BYTES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">MAX_FILE_SIZE_BYTES</span></div>
<div class="block">Controls which files will be considered for rewriting. Files with sizes above this threshold
 will be considered for rewriting regardless of any other criteria.

 <p>Defaults to 180% of the target file size.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MAX_FILE_SIZE_BYTES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_FILE_SIZE_DEFAULT_RATIO">
<h3>MAX_FILE_SIZE_DEFAULT_RATIO</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">MAX_FILE_SIZE_DEFAULT_RATIO</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MAX_FILE_SIZE_DEFAULT_RATIO">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_INPUT_FILES">
<h3>MIN_INPUT_FILES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">MIN_INPUT_FILES</span></div>
<div class="block">Any file group exceeding this number of files will be rewritten regardless of other criteria.
 This config ensures file groups that contain many files are compacted even if the total size of
 that group is less than the target file size. This can also be thought of as the maximum number
 of wrongly sized files that could remain in a partition after rewriting.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MIN_INPUT_FILES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MIN_INPUT_FILES_DEFAULT">
<h3>MIN_INPUT_FILES_DEFAULT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MIN_INPUT_FILES_DEFAULT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MIN_INPUT_FILES_DEFAULT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="REWRITE_ALL">
<h3>REWRITE_ALL</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">REWRITE_ALL</span></div>
<div class="block">Overrides other options and forces rewriting of all provided files.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.REWRITE_ALL">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="REWRITE_ALL_DEFAULT">
<h3>REWRITE_ALL_DEFAULT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">REWRITE_ALL_DEFAULT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.REWRITE_ALL_DEFAULT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_FILE_GROUP_SIZE_BYTES">
<h3>MAX_FILE_GROUP_SIZE_BYTES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">MAX_FILE_GROUP_SIZE_BYTES</span></div>
<div class="block">This option controls the largest amount of data that should be rewritten in a single file
 group. It helps with breaking down the rewriting of very large partitions which may not be
 rewritable otherwise due to the resource constraints of the cluster. For example, a sort-based
 rewrite may not scale to TB-sized partitions, and those partitions need to be worked on in
 small subsections to avoid exhaustion of resources.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MAX_FILE_GROUP_SIZE_BYTES">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="MAX_FILE_GROUP_SIZE_BYTES_DEFAULT">
<h3>MAX_FILE_GROUP_SIZE_BYTES_DEFAULT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">MAX_FILE_GROUP_SIZE_BYTES_DEFAULT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.iceberg.actions.SizeBasedFileRewriter.MAX_FILE_GROUP_SIZE_BYTES_DEFAULT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.iceberg.Table)">
<h3>SizeBasedFileRewriter</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">SizeBasedFileRewriter</span><wbr><span class="parameters">(<a href="../Table.html" title="interface in org.apache.iceberg">Table</a>&nbsp;table)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="defaultTargetFileSize()">
<h3>defaultTargetFileSize</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">defaultTargetFileSize</span>()</div>
</section>
</li>
<li>
<section class="detail" id="filterFiles(java.lang.Iterable)">
<h3>filterFiles</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;</span>&nbsp;<span class="element-name">filterFiles</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;tasks)</span></div>
</section>
</li>
<li>
<section class="detail" id="filterFileGroups(java.util.List)">
<h3>filterFileGroups</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;</span>&nbsp;<span class="element-name">filterFileGroups</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;&nbsp;groups)</span></div>
</section>
</li>
<li>
<section class="detail" id="table()">
<h3>table</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../Table.html" title="interface in org.apache.iceberg">Table</a></span>&nbsp;<span class="element-name">table</span>()</div>
</section>
</li>
<li>
<section class="detail" id="validOptions()">
<h3>validOptions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">validOptions</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FileRewriter.html#validOptions()">FileRewriter</a></code></span></div>
<div class="block">Returns a set of supported options for this rewriter. Only options specified in this list will
 be accepted at runtime. Any other options will be rejected.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FileRewriter.html#validOptions()">validOptions</a></code>&nbsp;in interface&nbsp;<code><a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a> extends <a href="../ContentScanTask.html" title="interface in org.apache.iceberg">ContentScanTask</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;,<wbr><a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a> extends <a href="../ContentFile.html" title="interface in org.apache.iceberg">ContentFile</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;&gt;</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="init(java.util.Map)">
<h3>init</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">init</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;options)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FileRewriter.html#init(java.util.Map)">FileRewriter</a></code></span></div>
<div class="block">Initializes this rewriter using provided options.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FileRewriter.html#init(java.util.Map)">init</a></code>&nbsp;in interface&nbsp;<code><a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a> extends <a href="../ContentScanTask.html" title="interface in org.apache.iceberg">ContentScanTask</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;,<wbr><a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a> extends <a href="../ContentFile.html" title="interface in org.apache.iceberg">ContentFile</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>options</code> - options to initialize this rewriter</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="wronglySized(T)">
<h3 id="wronglySized(org.apache.iceberg.ContentScanTask)">wronglySized</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">wronglySized</span><wbr><span class="parameters">(<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&nbsp;task)</span></div>
</section>
</li>
<li>
<section class="detail" id="planFileGroups(java.lang.Iterable)">
<h3>planFileGroups</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&gt;</span>&nbsp;<span class="element-name">planFileGroups</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link">Iterable</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;tasks)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="FileRewriter.html#planFileGroups(java.lang.Iterable)">FileRewriter</a></code></span></div>
<div class="block">Selects files which this rewriter believes are valid targets to be rewritten based on their
 scan tasks and groups those scan tasks into file groups. The file groups are then rewritten in
 a single executable unit, such as a Spark job.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="FileRewriter.html#planFileGroups(java.lang.Iterable)">planFileGroups</a></code>&nbsp;in interface&nbsp;<code><a href="FileRewriter.html" title="interface in org.apache.iceberg.actions">FileRewriter</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a> extends <a href="../ContentScanTask.html" title="interface in org.apache.iceberg">ContentScanTask</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;,<wbr><a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a> extends <a href="../ContentFile.html" title="interface in org.apache.iceberg">ContentFile</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">F</a>&gt;&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>tasks</code> - an iterable of scan task for files in a partition</dd>
<dt>Returns:</dt>
<dd>groups of scan tasks for files to be rewritten in a single executable unit</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="enoughInputFiles(java.util.List)">
<h3>enoughInputFiles</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">enoughInputFiles</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</span></div>
</section>
</li>
<li>
<section class="detail" id="enoughContent(java.util.List)">
<h3>enoughContent</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">enoughContent</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</span></div>
</section>
</li>
<li>
<section class="detail" id="tooMuchContent(java.util.List)">
<h3>tooMuchContent</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">tooMuchContent</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</span></div>
</section>
</li>
<li>
<section class="detail" id="inputSize(java.util.List)">
<h3>inputSize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">inputSize</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="SizeBasedFileRewriter.html" title="type parameter in SizeBasedFileRewriter">T</a>&gt;&nbsp;group)</span></div>
</section>
</li>
<li>
<section class="detail" id="splitSize(long)">
<h3>splitSize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">splitSize</span><wbr><span class="parameters">(long&nbsp;inputSize)</span></div>
<div class="block">Calculates the split size to use in bin-packing rewrites.

 <p>This method determines the target split size as the input size divided by the desired number
 of output files. The final split size is adjusted to be at least as big as the target file size
 but less than the max write file size.</div>
</section>
</li>
<li>
<section class="detail" id="numOutputFiles(long)">
<h3>numOutputFiles</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">numOutputFiles</span><wbr><span class="parameters">(long&nbsp;inputSize)</span></div>
<div class="block">Determines the preferable number of output files when rewriting a particular file group.

 <p>If the rewriter is handling 10.1 GB of data with a target file size of 1 GB, it could
 produce 11 files, one of which would only have 0.1 GB. This would most likely be less
 preferable to 10 files with 1.01 GB each. So this method decides whether to round up or round
 down based on what the estimated average file size will be if the remainder (0.1 GB) is
 distributed amongst other files. If the new average file size is no more than 10% greater than
 the target file size, then this method will round down when determining the number of output
 files. Otherwise, the remainder will be written into a separate file.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>inputSize</code> - a total input size for a file group</dd>
<dt>Returns:</dt>
<dd>the number of files this rewriter should create</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="writeMaxFileSize()">
<h3>writeMaxFileSize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">writeMaxFileSize</span>()</div>
<div class="block">Estimates a larger max target file size than the target size used in task creation to avoid
 creating tiny remainder files.

 <p>While we create tasks that should all be smaller than our target size, there is a chance
 that the actual data will end up being larger than our target size due to various factors of
 compression, serialization, which are outside our control. If this occurs, instead of making a
 single file that is close in size to our target, we would end up producing one file of the
 target size, and then a small extra file with the remaining data.

 <p>For example, if our target is 512 MB, we may generate a rewrite task that should be 500 MB.
 When we write the data we may find we actually have to write out 530 MB. If we use the target
 size while writing, we would produce a 512 MB file and an 18 MB file. If instead we use a
 larger size estimated by this method, then we end up writing a single file.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the target size plus one half of the distance between max and target</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="outputSpec()">
<h3>outputSpec</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../PartitionSpec.html" title="class in org.apache.iceberg">PartitionSpec</a></span>&nbsp;<span class="element-name">outputSpec</span>()</div>
</section>
</li>
<li>
<section class="detail" id="outputSpecId()">
<h3>outputSpecId</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">outputSpecId</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
