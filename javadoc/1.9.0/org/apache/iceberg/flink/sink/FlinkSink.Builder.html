<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>FlinkSink.Builder</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: org.apache.iceberg.flink.sink, class: FlinkSink, class: Builder">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.iceberg.flink.sink</a></div>
<h1 title="Class FlinkSink.Builder" class="title">Class FlinkSink.Builder</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.iceberg.flink.sink.FlinkSink.Builder</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Enclosing class:</dt>
<dd><a href="FlinkSink.html" title="class in org.apache.iceberg.flink.sink">FlinkSink</a></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static class </span><span class="element-name type-name-label">FlinkSink.Builder</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.apache.flink.streaming.api.datastream.DataStreamSink&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#append()" class="member-name-link">append</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Append the iceberg sink operators to write records to iceberg table.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#distributionMode(org.apache.iceberg.DistributionMode)" class="member-name-link">distributionMode</a><wbr>(<a href="../../DistributionMode.html" title="enum class in org.apache.iceberg">DistributionMode</a>&nbsp;mode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configure the write <a href="../../DistributionMode.html" title="enum class in org.apache.iceberg"><code>DistributionMode</code></a> that the flink sink will use.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#equalityFieldColumns(java.util.List)" class="member-name-link">equalityFieldColumns</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;columns)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configuring the equality field columns for iceberg table that accept CDC or UPSERT events.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flinkConf(org.apache.flink.configuration.ReadableConfig)" class="member-name-link">flinkConf</a><wbr>(org.apache.flink.configuration.ReadableConfig&nbsp;config)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#overwrite(boolean)" class="member-name-link">overwrite</a><wbr>(boolean&nbsp;newOverwrite)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rangeDistributionSortKeyBaseWeight(double)" class="member-name-link">rangeDistributionSortKeyBaseWeight</a><wbr>(double&nbsp;weight)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If sort order contains partition columns, each sort key would map to one partition and data
 file.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rangeDistributionStatisticsType(org.apache.iceberg.flink.sink.shuffle.StatisticsType)" class="member-name-link">rangeDistributionStatisticsType</a><wbr>(<a href="shuffle/StatisticsType.html" title="enum class in org.apache.iceberg.flink.sink.shuffle">StatisticsType</a>&nbsp;type)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Range distribution needs to collect statistics about data distribution to properly shuffle
 the records in relatively balanced way.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#set(java.lang.String,java.lang.String)" class="member-name-link">set</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;property,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;value)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the write properties for Flink sink.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAll(java.util.Map)" class="member-name-link">setAll</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;properties)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the write properties for Flink sink.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSnapshotProperties(java.util.Map)" class="member-name-link">setSnapshotProperties</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;properties)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSnapshotProperty(java.lang.String,java.lang.String)" class="member-name-link">setSnapshotProperty</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;property,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#table(org.apache.iceberg.Table)" class="member-name-link">table</a><wbr>(<a href="../../Table.html" title="interface in org.apache.iceberg">Table</a>&nbsp;newTable)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This iceberg <a href="../../Table.html" title="interface in org.apache.iceberg"><code>Table</code></a> instance is used for initializing <code>IcebergStreamWriter</code>
 which will write all the records into <a href="../../DataFile.html" title="interface in org.apache.iceberg"><code>DataFile</code></a>s and emit them to downstream operator.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tableLoader(org.apache.iceberg.flink.TableLoader)" class="member-name-link">tableLoader</a><wbr>(<a href="../TableLoader.html" title="interface in org.apache.iceberg.flink">TableLoader</a>&nbsp;newTableLoader)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The table loader is used for loading tables in <code>IcebergFilesCommitter</code> lazily, we need
 this loader because <a href="../../Table.html" title="interface in org.apache.iceberg"><code>Table</code></a> is not serializable and could not just use the loaded table
 from Builder#table in the remote task manager.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tableSchema(org.apache.flink.table.api.TableSchema)" class="member-name-link">tableSchema</a><wbr>(org.apache.flink.table.api.TableSchema&nbsp;newTableSchema)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toBranch(java.lang.String)" class="member-name-link">toBranch</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;branch)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#uidPrefix(java.lang.String)" class="member-name-link">uidPrefix</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;newPrefix)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the uid prefix for FlinkSink operators.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#upsert(boolean)" class="member-name-link">upsert</a><wbr>(boolean&nbsp;enabled)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">All INSERT/UPDATE_AFTER events from input stream will be transformed to UPSERT events, which
 means it will DELETE the old records and then INSERT the new records.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#writeParallelism(int)" class="member-name-link">writeParallelism</a><wbr>(int&nbsp;newWriteParallelism)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Configuring the write parallel number for iceberg stream writer.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="table(org.apache.iceberg.Table)">
<h3>table</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">table</span><wbr><span class="parameters">(<a href="../../Table.html" title="interface in org.apache.iceberg">Table</a>&nbsp;newTable)</span></div>
<div class="block">This iceberg <a href="../../Table.html" title="interface in org.apache.iceberg"><code>Table</code></a> instance is used for initializing <code>IcebergStreamWriter</code>
 which will write all the records into <a href="../../DataFile.html" title="interface in org.apache.iceberg"><code>DataFile</code></a>s and emit them to downstream operator.
 Providing a table would avoid so many table loading from each separate task.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newTable</code> - the loaded iceberg table instance.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="tableLoader(org.apache.iceberg.flink.TableLoader)">
<h3>tableLoader</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">tableLoader</span><wbr><span class="parameters">(<a href="../TableLoader.html" title="interface in org.apache.iceberg.flink">TableLoader</a>&nbsp;newTableLoader)</span></div>
<div class="block">The table loader is used for loading tables in <code>IcebergFilesCommitter</code> lazily, we need
 this loader because <a href="../../Table.html" title="interface in org.apache.iceberg"><code>Table</code></a> is not serializable and could not just use the loaded table
 from Builder#table in the remote task manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newTableLoader</code> - to load iceberg table inside tasks.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="set(java.lang.String,java.lang.String)">
<h3>set</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">set</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;property,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;value)</span></div>
<div class="block">Set the write properties for Flink sink. View the supported properties in <a href="../FlinkWriteOptions.html" title="class in org.apache.iceberg.flink"><code>FlinkWriteOptions</code></a></div>
</section>
</li>
<li>
<section class="detail" id="setAll(java.util.Map)">
<h3>setAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">setAll</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;properties)</span></div>
<div class="block">Set the write properties for Flink sink. View the supported properties in <a href="../FlinkWriteOptions.html" title="class in org.apache.iceberg.flink"><code>FlinkWriteOptions</code></a></div>
</section>
</li>
<li>
<section class="detail" id="tableSchema(org.apache.flink.table.api.TableSchema)">
<h3>tableSchema</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">tableSchema</span><wbr><span class="parameters">(org.apache.flink.table.api.TableSchema&nbsp;newTableSchema)</span></div>
</section>
</li>
<li>
<section class="detail" id="overwrite(boolean)">
<h3>overwrite</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">overwrite</span><wbr><span class="parameters">(boolean&nbsp;newOverwrite)</span></div>
</section>
</li>
<li>
<section class="detail" id="flinkConf(org.apache.flink.configuration.ReadableConfig)">
<h3>flinkConf</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">flinkConf</span><wbr><span class="parameters">(org.apache.flink.configuration.ReadableConfig&nbsp;config)</span></div>
</section>
</li>
<li>
<section class="detail" id="distributionMode(org.apache.iceberg.DistributionMode)">
<h3>distributionMode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">distributionMode</span><wbr><span class="parameters">(<a href="../../DistributionMode.html" title="enum class in org.apache.iceberg">DistributionMode</a>&nbsp;mode)</span></div>
<div class="block">Configure the write <a href="../../DistributionMode.html" title="enum class in org.apache.iceberg"><code>DistributionMode</code></a> that the flink sink will use. Currently, flink
 support <a href="../../DistributionMode.html#NONE"><code>DistributionMode.NONE</code></a> and <a href="../../DistributionMode.html#HASH"><code>DistributionMode.HASH</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mode</code> - to specify the write distribution mode.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rangeDistributionStatisticsType(org.apache.iceberg.flink.sink.shuffle.StatisticsType)">
<h3>rangeDistributionStatisticsType</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">rangeDistributionStatisticsType</span><wbr><span class="parameters">(<a href="shuffle/StatisticsType.html" title="enum class in org.apache.iceberg.flink.sink.shuffle">StatisticsType</a>&nbsp;type)</span></div>
<div class="block">Range distribution needs to collect statistics about data distribution to properly shuffle
 the records in relatively balanced way. In general, low cardinality should use <a href="shuffle/StatisticsType.html#Map"><code>StatisticsType.Map</code></a> and high cardinality should use <a href="shuffle/StatisticsType.html#Sketch"><code>StatisticsType.Sketch</code></a> Refer to
 <a href="shuffle/StatisticsType.html" title="enum class in org.apache.iceberg.flink.sink.shuffle"><code>StatisticsType</code></a> Javadoc for more details.

 <p>Default is <a href="shuffle/StatisticsType.html#Auto"><code>StatisticsType.Auto</code></a> where initially Map statistics is used. But if
 cardinality is higher than the threshold (currently 10K) as defined in <code>
 SketchUtil#OPERATOR_SKETCH_SWITCH_THRESHOLD</code>, statistics collection automatically switches to
 the sketch reservoir sampling.

 <p>Explicit set the statistics type if the default behavior doesn't work.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>type</code> - to specify the statistics type for range distribution.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rangeDistributionSortKeyBaseWeight(double)">
<h3>rangeDistributionSortKeyBaseWeight</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">rangeDistributionSortKeyBaseWeight</span><wbr><span class="parameters">(double&nbsp;weight)</span></div>
<div class="block">If sort order contains partition columns, each sort key would map to one partition and data
 file. This relative weight can avoid placing too many small files for sort keys with low
 traffic. It is a double value that defines the minimal weight for each sort key. `0.02` means
 each key has a base weight of `2%` of the targeted traffic weight per writer task.

 <p>E.g. the sink Iceberg table is partitioned daily by event time. Assume the data stream
 contains events from now up to 180 days ago. With event time, traffic weight distribution
 across different days typically has a long tail pattern. Current day contains the most
 traffic. The older days (long tail) contain less and less traffic. Assume writer parallelism
 is `10`. The total weight across all 180 days is `10,000`. Target traffic weight per writer
 task would be `1,000`. Assume the weight sum for the oldest 150 days is `1,000`. Normally,
 the range partitioner would put all the oldest 150 days in one writer task. That writer task
 would write to 150 small files (one per day). Keeping 150 open files can potentially consume
 large amount of memory. Flushing and uploading 150 files (however small) at checkpoint time
 can also be potentially slow. If this config is set to `0.02`. It means every sort key has a
 base weight of `2%` of targeted weight of `1,000` for every write task. It would essentially
 avoid placing more than `50` data files (one per day) on one writer task no matter how small
 they are.

 <p>This is only applicable to <a href="shuffle/StatisticsType.html#Map"><code>StatisticsType.Map</code></a> for low-cardinality scenario. For
 <a href="shuffle/StatisticsType.html#Sketch"><code>StatisticsType.Sketch</code></a> high-cardinality sort columns, they are usually not used as
 partition columns. Otherwise, too many partitions and small files may be generated during
 write. Sketch range partitioner simply splits high-cardinality keys into ordered ranges.

 <p>Default is <code>0.0%</code>.</div>
</section>
</li>
<li>
<section class="detail" id="writeParallelism(int)">
<h3>writeParallelism</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">writeParallelism</span><wbr><span class="parameters">(int&nbsp;newWriteParallelism)</span></div>
<div class="block">Configuring the write parallel number for iceberg stream writer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newWriteParallelism</code> - the number of parallel iceberg stream writer.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="upsert(boolean)">
<h3>upsert</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">upsert</span><wbr><span class="parameters">(boolean&nbsp;enabled)</span></div>
<div class="block">All INSERT/UPDATE_AFTER events from input stream will be transformed to UPSERT events, which
 means it will DELETE the old records and then INSERT the new records. In partitioned table,
 the partition fields should be a subset of equality fields, otherwise the old row that
 located in partition-A could not be deleted by the new row that located in partition-B.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>enabled</code> - indicate whether it should transform all INSERT/UPDATE_AFTER events to UPSERT.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="equalityFieldColumns(java.util.List)">
<h3>equalityFieldColumns</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">equalityFieldColumns</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;columns)</span></div>
<div class="block">Configuring the equality field columns for iceberg table that accept CDC or UPSERT events.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>columns</code> - defines the iceberg table's key.</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="uidPrefix(java.lang.String)">
<h3>uidPrefix</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">uidPrefix</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;newPrefix)</span></div>
<div class="block">Set the uid prefix for FlinkSink operators. Note that FlinkSink internally consists of
 multiple operators (like writer, committer, dummy sink etc.) Actually operator uid will be
 appended with a suffix like "uidPrefix-writer". <br>
 <br>
 If provided, this prefix is also applied to operator names. <br>
 <br>
 Flink auto generates operator uid if not set explicitly. It is a recommended <a href="https://ci.apache.org/projects/flink/flink-docs-master/docs/ops/production_ready/">
 best-practice to set uid for all operators</a> before deploying to production. Flink has an
 option to <code>pipeline.auto-generate-uid=false</code> to disable auto-generation and force
 explicit setting of all operator uid. <br>
 <br>
 Be careful with setting this for an existing job, because now we are changing the operator
 uid from an auto-generated one to this new value. When deploying the change with a
 checkpoint, Flink won't be able to restore the previous Flink sink operator state (more
 specifically the committer operator state). You need to use <code>--allowNonRestoredState</code>
 to ignore the previous sink state. During restore Flink sink state is used to check if last
 commit was actually successful or not. <code>--allowNonRestoredState</code> can lead to data loss
 if the Iceberg commit failed in the last completed checkpoint.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newPrefix</code> - prefix for Flink sink operator uid and name</dd>
<dt>Returns:</dt>
<dd><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink"><code>FlinkSink.Builder</code></a> to connect the iceberg table.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSnapshotProperties(java.util.Map)">
<h3>setSnapshotProperties</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">setSnapshotProperties</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;properties)</span></div>
</section>
</li>
<li>
<section class="detail" id="setSnapshotProperty(java.lang.String,java.lang.String)">
<h3>setSnapshotProperty</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">setSnapshotProperty</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;property,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;value)</span></div>
</section>
</li>
<li>
<section class="detail" id="toBranch(java.lang.String)">
<h3>toBranch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FlinkSink.Builder.html" title="class in org.apache.iceberg.flink.sink">FlinkSink.Builder</a></span>&nbsp;<span class="element-name">toBranch</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;branch)</span></div>
</section>
</li>
<li>
<section class="detail" id="append()">
<h3>append</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.apache.flink.streaming.api.datastream.DataStreamSink&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">append</span>()</div>
<div class="block">Append the iceberg sink operators to write records to iceberg table.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>DataStreamSink</code> for sink.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
